<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TJRU - CHUVEL</title>
    
    <!-- Den Rustne Spikern som favicon -->
    <link rel="icon" type="image/png" href="spiker.png">
    <style>
        /* Grunnleggende stiler */
        body {
            margin: 0;
            padding: 0;
            min-height: 100vh;
            background: #000;
            color: #fff;
        }

        #game-area {
            width: 100%;
            height: calc(100vh - 100px);
            position: relative;
            overflow: hidden;
            background: #1a1a1a;
            margin-top: 100px;
        }

        /* Vei med fire filer */
        .road {
            position: absolute;
            bottom: 150px;  /* Løftet opp */
            left: 0;
            width: 100%;
            height: 400px;
            display: flex;
            flex-direction: column;
        }

        .road-lane {
            flex: 1;
            background: #2a2a2a;
            border-top: 2px solid #3a3a3a;
            border-bottom: 2px solid #222;
            position: relative;
        }

        /* Animerte striper */
        .road-lane::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 0;
            right: 0;
            height: 4px;
            background: repeating-linear-gradient(
                to right,
                rgba(255,215,0,0.15) 0px,      /* Start med gul */
                rgba(255,215,0,0.15) 120px,    /* Lang gul stripe */
                transparent 120px,              /* Mellomrom */
                transparent 130px,              /* Mellomrom */
                rgba(255,255,255,0.3) 130px,   /* Kort hvit stripe */
                rgba(255,255,255,0.3) 150px,   /* Hvit stripe slutt */
                transparent 150px,              /* Mellomrom */
                transparent 200px              /* Full sekvens slutt */
            );
            animation: moveStripes 3s linear infinite;
        }

        @keyframes moveStripes {
            from { transform: translateX(0); }
            to { transform: translateX(-200px); }
        }

        /* Chu med hjul */
        #shovel-player {
            position: absolute;
            width: 120px;
            height: 80px;
            bottom: 20%;
            left: 15%;
            z-index: 10;
            transition: transform 0.3s ease-out;
        }

        /* Rød kropp */
        .shovel-body {
            position: absolute;
            width: 100%;
            height: 40px;
            background: #ff3333;
            border-radius: 8px;
            top: 0;
            z-index: 3;
        }

        /* Gul spade - OPPDATERT */
        .shovel-front {
            position: absolute;
            width: 60px;          /* Smalere bredde */
            height: 100px;        /* Beholder høyden */
            background: #FFD700;
            right: -90px;
            top: -30px;
            transform: skew(-25deg);
            border-radius: 5px;
            box-shadow: 
                inset -2px 2px 10px rgba(255,255,255,0.4),
                inset 2px -2px 10px rgba(0,0,0,0.2);
            z-index: 1;
        }

        /* Hjul */
        .wheel {
            position: absolute;
            width: 40px;
            height: 40px;
            background: #333;
            border-radius: 50%;
            bottom: -20px;
            border: 5px solid #111;
            animation: wheel-spin 2s linear infinite;
            z-index: 4;
        }

        .wheel.front { right: 10px; }
        .wheel.back { left: 10px; }

        @keyframes wheel-spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Start-skjerm */
        .start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            transition: opacity 0.5s;
        }

        .start-content {
            text-align: center;
            color: #fff;
        }

        .start-hint {
            margin-top: 20px;
            color: #FFD700;
            animation: pulse 1s infinite;
        }

        @keyframes pulse {
            0% { opacity: 0.5; }
            50% { opacity: 1; }
            100% { opacity: 0.5; }
        }

        /* Øyne-stiler */
        .eyes {
            position: absolute;
            top: -15px;
            left: 20px;
            z-index: 4;
            display: flex;
            gap: 15px;  /* Mellomrom mellom øynene */
        }

        .eye {
            width: 8px;          /* Litt mindre øyne */
            height: 8px;
            background: #111;
            border-radius: 50%;
            border: 2px solid #000;
            box-shadow: 0 0 2px rgba(0,0,0,0.5);
        }

        /* Forgrunn med gress */
        .foreground {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 150px;
            background: linear-gradient(
                to bottom,
                #2d5a27,
                #3a7233
            );
            box-shadow: 0 -10px 20px rgba(0,0,0,0.3);
        }

        /* Gressdetaljer */
        .grass-details {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 20px;
            background: repeating-linear-gradient(
                80deg,
                transparent 0,
                transparent 2px,
                #4a8940 2px,
                #4a8940 4px
            );
            opacity: 0.5;
        }

        /* Hindring-stil */
        .obstacle {
            width: 40px;
            height: 40px;
            background: #666;
            border-radius: 50%;
            position: absolute;
            z-index: 5;
        }

        /* Score display */
        .score-display {
            position: fixed;
            top: 20px;
            right: 20px;
            font-size: 24px;
            color: #FFD700;
            font-weight: bold;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="game-area">
        <div class="road">
            <div class="road-lane"></div>
            <div class="road-lane"></div>
            <div class="road-lane"></div>
            <div class="road-lane"></div>
        </div>

        <!-- Legg til forgrunn -->
        <div class="foreground">
            <div class="grass-details"></div>
        </div>

        <div id="shovel-player">
            <div class="eyes">
                <div class="eye"></div>
                <div class="eye"></div>
            </div>
            <div class="shovel-body"></div>
            <div class="shovel-front"></div>
            <div class="wheel front"></div>
            <div class="wheel back"></div>
        </div>
    </div>

    <div class="score-display">Score: <span id="score">0</span></div>

    <script>
        const player = document.getElementById('shovel-player');
        const scoreDisplay = document.getElementById('score');
        let currentLane = 0;
        let gameStarted = false;
        let score = 0;
        let gameSpeed = 5;
        let obstacles = [];

        // Start-skjerm
        const startScreen = document.createElement('div');
        startScreen.className = 'start-screen';
        startScreen.innerHTML = `
            <div class="start-content">
                <h2>CHUVEL</h2>
                <p>Bruk piltaster eller klikk for å styre</p>
                <div class="start-hint">Trykk piltast eller klikk for å starte</div>
            </div>
        `;
        document.getElementById('game-area').appendChild(startScreen);

        // Start spillet ved klikk
        startScreen.addEventListener('click', startGame);

        // Opprett hindringer
        function createObstacle() {
            const lane = Math.floor(Math.random() * 4) * -1;  // Random lane (0 til -3)
            const obstacle = {
                x: window.innerWidth,  // Start fra høyre side
                lane: lane,
                width: 40,
                height: 40,
                speed: gameSpeed,
                element: document.createElement('div')
            };
            
            obstacle.element.className = 'obstacle';
            obstacle.element.style.position = 'absolute';
            obstacle.element.style.right = '0';
            document.getElementById('game-area').appendChild(obstacle.element);
            obstacles.push(obstacle);
        }

        // Sjekk kollisjon
        function checkCollision(obstacle) {
            const playerBounds = player.getBoundingClientRect();
            const obstacleBounds = obstacle.element.getBoundingClientRect();
            
            return !(playerBounds.right < obstacleBounds.left || 
                    playerBounds.left > obstacleBounds.right || 
                    playerBounds.bottom < obstacleBounds.top || 
                    playerBounds.top > obstacleBounds.bottom);
        }

        // Game loop
        function gameLoop() {
            if (!gameStarted) return;
            
            // Flytt hindringer
            obstacles.forEach((obstacle, index) => {
                obstacle.x -= obstacle.speed;
                obstacle.element.style.transform = 
                    `translate(${-obstacle.x}px, ${obstacle.lane * 100}px)`;
                
                // Sjekk kollisjon
                if (checkCollision(obstacle)) {
                    gameOver();
                }
                
                // Fjern hindringer som er ute av skjermen
                if (obstacle.x > window.innerWidth + 100) {
                    obstacle.element.remove();
                    obstacles.splice(index, 1);
                    score += 10;  // Poeng for hver hindring som passeres
                    scoreDisplay.textContent = score;
                }
            });
            
            // Opprett nye hindringer
            if (Math.random() < 0.02) {  // 2% sjanse per frame
                createObstacle();
            }
            
            requestAnimationFrame(gameLoop);
        }

        // Game over
        function gameOver() {
            gameStarted = false;
            alert(`Game Over! Score: ${score}`);
            location.reload();  // Restart spillet
        }

        // Start game
        function startGame() {
            if (gameStarted) return;
            gameStarted = true;
            startScreen.style.opacity = '0';
            setTimeout(() => startScreen.remove(), 500);
            moveToLane(0);
            gameLoop();  // Start game loop
        }

        // Tastaturkontroller
        document.addEventListener('keydown', (e) => {
            if (!gameStarted) {
                if (e.key === 'ArrowUp' || e.key === 'ArrowDown') {
                    startGame();
                }
                return;
            }

            if (e.key === 'ArrowUp' && currentLane > -3) {  // Kan gå opp til lane -3
                currentLane--;
                moveToLane(currentLane);
                console.log('Current lane:', currentLane);  // Debug
            } else if (e.key === 'ArrowDown' && currentLane < 0) {  // Kan gå ned til lane 0
                currentLane++;
                moveToLane(currentLane);
                console.log('Current lane:', currentLane);  // Debug
            }
        });

        // Touch/klikk-kontroller
        const gameArea = document.getElementById('game-area');
        gameArea.addEventListener('click', (e) => {
            if (!gameStarted) return;
            
            const rect = gameArea.getBoundingClientRect();
            const clickY = e.clientY - rect.top;
            const halfHeight = rect.height / 2;

            if (clickY < halfHeight && currentLane > -3) {
                currentLane--;
                moveToLane(currentLane);
            } else if (clickY >= halfHeight && currentLane < 0) {
                currentLane++;
                moveToLane(currentLane);
            }
        });

        function moveToLane(lane) {
            const laneHeight = document.querySelector('.road-lane').offsetHeight;
            const newY = lane * laneHeight;  // Negative lanes gir negativ Y-posisjon
            player.style.transform = `translateY(${newY}px)`;
            console.log('Moving to lane:', lane, 'Position:', newY); // Debug
        }
    </script>
</body>
</html> 